\documentclass[a4paper,12pt]{jarticle}
\usepackage[dvipdfmx]{graphicx}
\usepackage{amsmath}
\usepackage{subfigure}
\usepackage{comment}

\setlength{\hoffset}{0cm}
\setlength{\oddsidemargin}{-3mm}
\setlength{\evensidemargin}{-3cm}
\setlength{\marginparsep}{0cm}
\setlength{\marginparwidth}{0cm}
\setlength{\textheight}{24.7cm}
\setlength{\textwidth}{17cm}
\setlength{\topmargin}{-45pt}

\renewcommand{\baselinestretch}{1.6}
\renewcommand{\floatpagefraction}{1}
\renewcommand{\topfraction}{1}
\renewcommand{\bottomfraction}{1}
\renewcommand{\textfraction}{0}
\renewcommand{\labelenumi}{(\arabic{enumi})}
%\renewcommand{\figurename}{Fig.} %図をFig.にする

%図のキャプションからコロン：を消す
\makeatletter
\long\def\@makecaption#1#2{% #1=図表番号、#2=キャプション本文
\sbox\@tempboxa{#1. #2}
\ifdim \wd\@tempboxa >\hsize
#1 #2\par 
\else
\hb@xt@\hsize{\hfil\box\@tempboxa\hfil}
\fi}
\makeatother
% 

\title{電機システム制御特論 \ レポート課題\\
Assignment(2016/06/03)\
}
\author{\vspace{40mm}\\
九州工業大学大学院 \hspace{0mm} 工学府\\
機械知能工学専攻\ \hspace{0mm} 知能制御工学コース \\
\vspace{5mm}\\
所属：\ 西田研究室\\
学籍番号：\ 16344217\\
提出者氏名：\ 津上 \hspace{0mm} 祐典\\\vspace{5mm}\\ }
\date{平成28年\ 6月\ 10日}

\begin{document}

%表紙
\titlepage
\maketitle

\newpage

\thispagestyle{empty}
\tableofcontents

\newpage
\setcounter{page}{1}
%%%%%%%%%%%%%%%%%%%%%%%%
\section{問題}
%%%%%%%%%%%%%%%%%%%%%%%%
以下に示す特性を持つDCモータの速度制御系を少なくとも２つの方法で設計せよ．
%
\begin{table}[h]
 \centering
 \caption{DCモータのパラメータ}
 \label{table:DC_dim}
 \begin{tabular}{c|c|c} \hline
  名称 [単位]                    & 記号  & 数値\\\hline
  定格電力 [kW]                  &$P$    &150  \\\hline
  定格電圧 [V]                   &$V$    &450  \\\hline
  電機子抵抗 [$\Omega$]          &$R_a$  & 0.15 \\\hline
  電機子インダクタンス [H]        &$L_a$   &0.003\\\hline
  慣性モーメント [kg$\rm {m^3}$] &$J$     &10  \\\hline
  誘起電圧定数 [V$\cdot$s/rad]    &$K_E$   &8.50 \\\hline
  トルク定数 [Nm/A]               & $K_T$  &8.50 \\\hline
  基底速度 [rpm]                &$\omega$&500  \\\hline
 \end{tabular}
\end{table}
%
%%%%%%%%%%%%%%%%%%%%%%%%%
\section{DCモータの特性}
%%%%%%%%%%%%%%%%%%%%%%%%%
はじめに，本レポートで用いるDCモータのブロック線図を図\ref{fig:DC_model}に示す．
%
\begin{figure}[bp]
 \begin{center}
  \includegraphics[width = 150mm]{fig/DC_model.eps}
 \end{center}
 \caption{DCモータのブロック線図}
 \label{fig:DC_model}
\end{figure}
%
\newpage
%
はじめに，図\ref{fig:DC_model}に示すDCモータのモデルの伝達特性を導出する．
図\ref{fig:DC_model}より
%
\begin{equation}
 \Omega_m(s)=\frac{1}{Js}\left\{\frac{K_T}{R_{a}+L_{a}s}(V-K_E\Omega_m)-T_L\right\}
\end{equation}
と表され，式変形すると，
\begin{equation*}
 \left(Js+\frac{K_{T}K_{E}}{R_{a}+L_{a}}s\right)\Omega_m(s)=\frac{K_{T}}{R_{a}+L_{a}s}-T_L
\end{equation*}
%
\begin{equation*}
 \Omega_m(s)=\frac{K_T}{JL_{a}s^2+JR_{a}s+K_TK_E}-\frac{R_{a}+L_{a}s}{JL_{a}s^2+JR_{a}s+K_TK_E}T_L
\end{equation*}
%
\begin{equation}
 \Omega_m(s)=\frac{\frac{1}{K_E}}{\frac{JL_a}{K_{T}K_E}s^2+\frac{JR_a}{K_{T}K_E}s+1}-\frac{\frac{R_{a}+L_{a}s}{K_{T}K_E}}{\frac{JL_a}{K_{T}K_E}s^2+\frac{JR_a}{K_{T}K_E}s+1}T_L
\end{equation}
%
となる．ここで$K_T=K_E$である．(2)式において
\begin{eqnarray}
 \begin{cases}
  T = \sqrt{\frac{L_{a}J}{K_{E}K_T}} & \\
  \zeta= \frac{R_a}{2}\sqrt{\frac{J}{K_{E}K_{T}L_a}} & \\
  K = \frac{1}{K_E}
 \end{cases}
\end{eqnarray}
とおく．すると＊＊から＊＊までの伝達特性は，
\begin{equation}\label{equ:plant}
 P(s)=\frac{K}{T^2s^2+2\zeta Ts+1}
\end{equation}
となる．

%%%%%%%%%%%%%%%%%%%%%%%%%
\section{IP-D}
%%%%%%%%%%%%%%%%%%%%%%%%%
IP-D
%%%%%%%%%%%%%%%%%%%%%%%%%
\section{IMC(Internal Model Contorl)法}
%%%%%%%%%%%%%%%%%%%%%%%%%
本節ではIMC(Internal Model Contorl)法を用いてDCモータの速度制御系を設計
する．IMC法（内部モデル制御法）は適切なフィルタを選ぶことで簡単に安定な
制御系を設計できる手法である．
%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{IMCの原理}
%%%%%%%%%%%%%%%%%%%%%%%%%
まず，IMC法の原理について説明する．
%
\begin{figure}[tbp]
 \begin{center}
  \includegraphics[width = 80mm]{fig/FF.eps}
 \end{center}
 \caption{フィードフォワード制御系}
 \label{fig:ff}
\end{figure}
%
図\ref{fig:ff}にフィードフォワード制御系のブロック線図
を示す．ここで，コントローラ$Q(s)$がプラントのモデル$P(s)$の逆数と等価で
あるとき，出力$Y(s)$は，入力を$R(s)$とすると，
\begin{equation}
Y(s) = P(s)Q(s)R(s) = P(s)P^{-1}(s)R(s) =R(s)
\end{equation}
となる．つまり，出力$Y(s)$は入力$R(s)$と等しくなる．これがIMC法の原理であ
り，コントローラはプラントのモデルの情報を含む形になる．図\ref{fig:IMC}
にIMC法を用いた制御系のブロック線図を示す．
%
\begin{figure}[tbp]
 \begin{center}
  \includegraphics[width = 100mm]{fig/IMC.eps}
 \end{center}
 \caption{IMC法を用いた制御系}
 \label{fig:IMC}
\end{figure}
%
ここで$P_n(s)$はプラントのノミナルモデルである．もし，ノミナルモデルがプ
ラントのモデルと完全に一致（つまり$P_n(s)=P(n)$）しているなら，プラント
の出力とノミナルモデルの出力は等しくなる．したがって，図\ref{fig:ff}に示
すフィードフォワード制御系と等価になる．コントローラはプラントのモデルの
逆数であることが望ましいが，場合によって，右半面に零点（実部が正の零点）もしくはむだ時間要
素を持つシステムである非最小位相（NMP）系になる可能性がある．プラントの
モデルの逆数は制御系のパフォーマンスに影響してくる．このようになった場合
の改善策として以下の3点が挙げられる．
%
\begin{itemize}
 \item プラントにむだ時間要素を含む場合，$P^{-1}(s)$はコントローラとして使えないので
	   $P^{-1}(s)$からむだ時間要素を取り除けば良い（無視すれば良い）．
	   
 \item プラントに実部が正の零点を持つ場合，$P^{-1}(s)$は不安定である．こ
	   の場合は，実部が正の零点を取り除き，実部が正の零点を含むよ
	   うな全域通過関数（all-pass function）を構成すれば良い．例として，
	   $P_n(s)$に$s=4$という実部が正の零点を持つ場合，$P_n(s)$に
	   $(s+4)/(s+4)$を掛ける．すると全域通過関数は$(s+4)/(s-4)$となる．
	   
 \item $P(n)$が厳密にプロパーで，$P^{-1}(s)$がプロパーでない場合，IMCフィ
	   ルターと呼ばれるローパスフィルタを追加すれば良い．
\end{itemize}
%
上述した3つ目の場合におけるコントローラの設計に関して考える．プラントの
ノミナルモデル$P_n(s)$は最小位相（Minimum Phase）部$P_{nM}(s)$と全域通過
（all-pass）部$P_{nA}(s)$に分解できる．
%
\begin{equation}
 P_n(s)=P_{nM}(s)P_{nA}(s)
\end{equation}
%
ここで$P_{nA}(s)$はむだ時間要素もしくは実部が正の零点をもつ伝達関数であ
る．ここで，IMCフィルタは以下の式で与えられる．
%
\begin{equation}\label{equ:imc_f}
 F(s) = \frac{1}{(\lambda s + 1)^n}
\end{equation}
%
したがってコントローラ$Q(s)$は
%
\begin{equation}\label{equ:imc_c}
 Q(s) = P_{nM}^{-1}(s)F(s)
\end{equation}
%
となる．また，図\ref{fig:IMC}に示したIMCを用いた制御系は図\ref{fig:henkan}に示すよう
な等価変形することが出来る．
%
\begin{figure}[tbp]
  \begin{center} 
  \subfigure[IMC]{
    \includegraphics[width = 80 mm]{fig/IMC_a.eps}
     \label{fig:IMC_b}
  }
  %
  \hfill
  %
  \subfigure[IMCを等価変換したもの]{
   \includegraphics[width = 80mm]{fig/IMC_b.eps}
    \label{fig:IMC_b}
  }
  \end{center}
  \caption{IMCの等価変換}
  \label{fig:henkan}
\end{figure}
%
図\ref{fig:IMC_b}中のコントローラ$C(s)$は，
%
\begin{equation}
 C(s) = \frac{Q(s)}{1 - P_n(s)Q(s)}
\end{equation}
%
となる．
%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{制御系の設計}
%%%%%%%%%%%%%%%%%%%%%%%%%
次に，先ほど説明したIMC法を用いてDCモータの速度制御系を設計する．
ここではノミナルモデルはプラントと等しい，つまり$P(s)=P_{n}(s)$である．
また，ノミナルモデルは最小位相系である，つまり$P_n(s)=P_{nM}(s)$であると
仮定する．すると，IMCコントローラ$Q(s)$は(\ref{equ:plant}),(\ref{equ:imc_c})式より
%
\begin{equation}
 Q(s) = P_{nM}^{-1}(s)F(s) = P^{-1}(s)F(s) = \frac{T^2s^2+2\zeta Ts+1}{K}F(s) 
\end{equation}
%
となる．ここで一次（$n=1$）のIMCフィルタ$F(s)$を考えると，
(\ref{equ:imc_f})式より$F(s)$は
%
\begin{equation}
 F(s) = \frac{1}{\lambda s + 1}
\end{equation}
%
となる．以上より，IMCコントローラ$Q(s)$は
%
\begin{equation}
 Q(s) = \frac{T^2s^2+2\zeta Ts+1}{K(\lambda s + 1)}
\end{equation}
%
となる．したがって，一般のフィードバックコントローラ$C(s)$は
%
\begin{eqnarray}\label{equ:C_s}
 C(s) & = & \frac{Q(s)}{1 - P_n(s)Q(s)} \nonumber  \\ 
  & = & \frac{\frac{T^2s^2+2\zeta Ts+1}{K(\lambda s +
  1)}}{1-\frac{K}{T^2s^2+2\zeta Ts+1}\frac{T^2s^2+2\zeta Ts+1}{K(\lambda
  s + 1)}} \nonumber \\ 
 & = & \frac{T^2s^2+2\zeta Ts+1}{K\lambda s} \nonumber  \\
  & = & \frac{2\zeta T}{K\lambda}\Bigl(1+\frac{1}{2\zeta Ts}+\frac{T}{2\zeta}s\Bigr)
\end{eqnarray}
%
となる．\ref{equ:C_s}を見ると

%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{シミュレーション}
%%%%%%%%%%%%%%%%%%%%%%%%%
%
\begin{figure}[tbp]
 \begin{center}
  \includegraphics[width = 150mm]{fig/IMC_result.eps}
 \end{center}
 \caption{IMC法で$\lambda=0.1,0.2,0.5$として設計したシステムのステップ応答}
 \label{fig:IMC_result}
\end{figure}
%

目標を達するのは早いがトルクは？
%%%%%%%%%%%%%%%%%%%%%%%%%
\section{まとめ}
%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
